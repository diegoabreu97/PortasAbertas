function checkForMatch() {
    lockBoard = true;
    const [card1, card2] = flippedCards;
    const isMatch = card1.dataset.emoji === card2.dataset.emoji;

    if (isMatch) {
        matchedCards += 2;
        flippedCards = [];
        lockBoard = false;
        if (matchedCards === cardsArray.length) {
            message.textContent = `Parabéns! Você venceu o jogo! Jogadas: ${movesCount}, Tempo: ${secondsElapsed}s`;
            stopTimer();
            addToRanking(playerName, movesCount, secondsElapsed);
            resetButton.disabled = true;
            gameBoard.style.pointerEvents = 'none';
            startButton.disabled = false;
            playerNameInput.disabled = false;
            playerNameInput.value = '';
        }
    } else {
        setTimeout(() => {
            card1.classList.remove('flipped');
            card2.classList.remove('flipped');
            flippedCards = [];
            lockBoard = false;
        }, 1000);
    }
}

resetButton.addEventListener('click', () => {
    flippedCards = [];
    matchedCards = 0;
    lockBoard = false;
    resetStats();
    createBoard();
});

function startTimer() {
    secondsElapsed = 0;
    updateTimer();
    timerInterval = setInterval(() => {
        secondsElapsed++;
        updateTimer();
    }, 1000);
}

function stopTimer() {
    clearInterval(timerInterval);
}

function updateTimer() {
    timerDisplay.textContent = `Tempo: ${secondsElapsed}s`;
}

function updateMoves() {
    movesDisplay.textContent = `Jogadas: ${movesCount}`;
}

function resetStats() {
    stopTimer();
    timerStarted = false;
    secondsElapsed = 0;
    movesCount = 0;
    updateTimer();
    updateMoves();
}
